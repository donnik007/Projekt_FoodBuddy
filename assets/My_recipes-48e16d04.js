import{_ as w,h as z,j as R,i as S,r as v,o as u,c,a as t,t as d,w as p,v as a,e as h,n as V,y as D,F as k,f as b,k as _,l as C,g as E,p as x,b as I}from"./index-72d2ae5b.js";import{d as A,u as M,g as N,a as U,c as K}from"./index.esm2017-66dc5ead.js";import{s as L}from"./vue-multiselect.esm-a2ba8487.js";const P={components:{Multiselect:L},data(){return{recipes:[],searchTerm:"",maxTime:120,selectedIngredients:[],ingredients:[],isDropdownOpen:!1,AutorEmail:"",currentRecipe:null,db:null,selectedType:null,selectedDifficulty:null,types:[],difficulties:[]}},methods:{async getEmail(){const n=z();R(n,async e=>{e&&(this.AutorEmail=e.displayName||e.email)})},openDropdown(){this.isDropdownOpen=!0},closeDropdown(){this.isDropdownOpen=!1},startEditing(n){this.currentRecipe={...n}},async submitEdit(){if(typeof this.currentRecipe.Składniki=="string"&&(this.currentRecipe.Składniki=this.currentRecipe.Składniki.split(`
`)),this.currentRecipe.id){const n=A(this.db,"recipes",this.currentRecipe.id);await M(n,this.currentRecipe),this.currentRecipe=null}else console.error("Error: this.currentRecipe.id is undefined")},cancelEdit(){this.currentRecipe=null}},computed:{customLabel(){return n=>`${n.name} `},filteredRecipes(){const n=this.searchTerm.toLowerCase();return this.recipes.filter(e=>Object.values(e).some(m=>m.toString().toLowerCase().includes(n))&&e.Time<=this.maxTime&&this.selectedIngredients.every(m=>e.Składniki.includes(m.name))&&e.Autor===this.AutorEmail&&(!this.selectedType||e.Typ===this.selectedType)&&(!this.selectedDifficulty||e.Poziom===this.selectedDifficulty))}},async created(){this.getEmail();const e=S({apiKey:"AIzaSyDcvt3tNCGlU8YwSBsZQakfo9hiTpmpOuo",authDomain:"foodbuddy-3c448.firebaseapp.com",databaseURL:"https://foodbuddy-3c448.firebaseio.com",projectId:"foodbuddy-3c448",storageBucket:"foodbuddy-3c448.appspot.com",messagingSenderId:"864698295961",appId:"1:864698295961:web:beb2e5b10d1c88b7fd7a08",measurementId:"G-DMB55S2KMY"});this.db=N(e);const m=await U(K(this.db,"recipes"));this.recipes=m.docs.map(l=>({id:l.id,...l.data()})),this.ingredients=[...new Set(this.recipes.flatMap(l=>l.Składniki))].map(l=>({name:l})),this.types=[...new Set(this.recipes.map(l=>l.Typ))],this.difficulties=[...new Set(this.recipes.map(l=>l.Poziom))]}},s=n=>(x("data-v-d48bd408"),n=n(),I(),n),B={key:0},O={for:"time"},j={key:1,class:"recipes-container"},W=["src"],F={class:"no-bullets"},G=["onClick"],Y=s(()=>t("br",null,null,-1)),Z={key:2},q=s(()=>t("h2",null,"Edit Recipe",-1)),Q=s(()=>t("label",{for:"Nazwa"},"Nazwa:",-1)),H=s(()=>t("label",{for:"Składniki"},"Składniki:",-1)),J=s(()=>t("label",{for:"Kroki"},"Kroki:",-1)),X=s(()=>t("label",{for:"Time"},"Czas przygotowania w minutach:",-1)),$=s(()=>t("label",{for:"Typ"},"Typ:",-1)),ee=s(()=>t("option",{value:"Mięsne"},"Mięsne",-1)),te=s(()=>t("option",{value:"Bezmięsne"},"Bezmięsne",-1)),ie=s(()=>t("option",{value:"Wegańskie"},"Wegańskie",-1)),oe=s(()=>t("option",{value:"Wegetariańskie"},"Wegetariańskie",-1)),se=[ee,te,ie,oe],ne=s(()=>t("label",{for:"Poziom"},"Poziom Trudności:",-1)),le=s(()=>t("option",{value:"Łatwy"},"Łatwy",-1)),re=s(()=>t("option",{value:"Średni"},"Średni",-1)),de=s(()=>t("option",{value:"Trudny"},"Trudny",-1)),pe=[le,re,de],ue=s(()=>t("label",{for:"photo"},"Link do zdjęcia:",-1)),ce=s(()=>t("button",{type:"submit"},"Zapisz",-1));function ae(n,e,m,l,o,r){const y=v("multiselect");return u(),c("div",null,[t("h1",null,"Moje przepisy: "+d(o.AutorEmail),1),o.currentRecipe?D("",!0):(u(),c("div",B,[p(t("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>o.searchTerm=i),type:"text",placeholder:"Szukaj"},null,512),[[a,o.searchTerm]]),t("label",O,"Czas przygotowania (min): "+d(o.maxTime),1),p(t("input",{"onUpdate:modelValue":e[1]||(e[1]=i=>o.maxTime=i),type:"range",id:"time",name:"time",min:"0",max:"200"},null,512),[[a,o.maxTime]]),h(y,{modelValue:o.selectedIngredients,"onUpdate:modelValue":e[2]||(e[2]=i=>o.selectedIngredients=i),options:o.ingredients,customLabel:r.customLabel,multiple:"","track-by":"name",placeholder:"Wybierz składniki",class:V(["multiselect",{"dropdown-open":o.isDropdownOpen}]),onOpen:r.openDropdown,onClose:r.closeDropdown},null,8,["modelValue","options","customLabel","class","onOpen","onClose"]),h(y,{modelValue:o.selectedType,"onUpdate:modelValue":e[3]||(e[3]=i=>o.selectedType=i),options:o.types,placeholder:"Wybierz typ",class:"multiselect"},null,8,["modelValue","options"]),h(y,{modelValue:o.selectedDifficulty,"onUpdate:modelValue":e[4]||(e[4]=i=>o.selectedDifficulty=i),options:o.difficulties,placeholder:"Wybierz poziom trudności",class:"multiselect"},null,8,["modelValue","options"])])),o.currentRecipe?(u(),c("div",Z,[q,t("form",{onSubmit:e[13]||(e[13]=C((...i)=>r.submitEdit&&r.submitEdit(...i),["prevent"])),class:"recipe-form"},[Q,p(t("input",{id:"Nazwa","onUpdate:modelValue":e[5]||(e[5]=i=>o.currentRecipe.Nazwa=i),type:"text"},null,512),[[a,o.currentRecipe.Nazwa]]),H,p(t("textarea",{id:"Składniki","onUpdate:modelValue":e[6]||(e[6]=i=>o.currentRecipe.Składniki=i)},null,512),[[a,o.currentRecipe.Składniki]]),J,p(t("textarea",{id:"Kroki","onUpdate:modelValue":e[7]||(e[7]=i=>o.currentRecipe.Kroki=i)},null,512),[[a,o.currentRecipe.Kroki]]),X,p(t("input",{id:"Time","onUpdate:modelValue":e[8]||(e[8]=i=>o.currentRecipe.Time=i),type:"number"},null,512),[[a,o.currentRecipe.Time]]),$,p(t("select",{id:"Typ","onUpdate:modelValue":e[9]||(e[9]=i=>o.currentRecipe.Typ=i)},se,512),[[_,o.currentRecipe.Typ]]),ne,p(t("select",{id:"Poziom","onUpdate:modelValue":e[10]||(e[10]=i=>o.currentRecipe.Poziom=i)},pe,512),[[_,o.currentRecipe.Poziom]]),ue,p(t("input",{id:"photo","onUpdate:modelValue":e[11]||(e[11]=i=>o.currentRecipe.photo=i),type:"text"},null,512),[[a,o.currentRecipe.photo]]),ce,t("button",{type:"button",onClick:e[12]||(e[12]=(...i)=>r.cancelEdit&&r.cancelEdit(...i))},"Anuluj")],32)])):(u(),c("div",j,[(u(!0),c(k,null,b(r.filteredRecipes,(i,T)=>(u(),c("div",{class:"recipe-card",key:T},[t("h2",null,d(i.Nazwa),1),t("img",{src:i.photo,alt:"Recipe photo"},null,8,W),t("p",null,[E("Składniki: "),t("ul",F,[(u(!0),c(k,null,b(i.Składniki,(f,g)=>(u(),c("li",{key:g},d(f),1))),128))])]),t("p",null,"Kroki: "+d(i.Kroki),1),t("p",null,"Czas przygotowania w minutach: "+d(i.Time?i.Time.toString():""),1),t("p",null,"Typ: "+d(i.Typ),1),t("p",null,"Poziom Trudności: "+d(i.Poziom),1),t("p",null,"Autor: "+d(i.Autor),1),t("button",{onClick:f=>r.startEditing(i)},"Edit",8,G),Y]))),128))]))])}const fe=w(P,[["render",ae],["__scopeId","data-v-d48bd408"]]);export{fe as default};
